<form class="form-horizontal" (ngSubmit)="onSubmit()" [formGroup]="phenomenonForm">


  <!-- 1 FORM-CONTENT -->
  <div class="panel panel-primary">


    <!-- 1.1 BANNER -->
    <senph-hero-banner title="Edit Phenomenon:" [subtitle]="heroBannerString + phenomenonForm.get('uri').value">
    </senph-hero-banner>


    <!-- 1.2 FORM-FIELDS -->
    <div class="panel-body">


      <!-- 1.2.1 URI -->
      <div class="container well some-space">
        <div class="field is-horizontal is-grouped">
          <div class="field-label is-normal">
            <label class="label">URI:</label>
          </div>
          <div class="form-group field-body">
            <div class="field">
              <div class="control">
                <div class=" input-group">
                  <span class="input-group-addon" id="heroaddon">{{heroBannerString}}</span>
                  <input type="text" id="uri" formControlName="uri" class="input is-normal"
                    (blur)="logValidationErrors()" aria-describedby="heroaddon">
                </div>
              </div>
              <span class="help-block" *ngIf="formErrors.description">
                {{formErrors.description}}
              </span>
            </div>
          </div>
        </div>
      </div>


      <!-- 1.2.2 LABELS -->
      <div class="container well some-space">
        <label for="label">Labels</label>
        <div formArrayName="label" *ngFor="let dom of phenomenonForm.get('label').controls; let i = index">
          <div [formGroupName]="i">
            <div class="row">
              <div class="col-sm-10">
                <div class="field is-horizontal is-grouped">
                  <div class="form-group field-body">
                    <div class="field is-grouped">
                      <div class="field-label is-normal">
                        <label class="label">Label:</label>
                      </div>
                      <div class="control">
                        <input class="input is-normal" type="text" placeholder="Label" [id]="'labelVal' + i"
                          formControlName="value">
                      </div>
                    </div>
                  </div>
                  <div class="form-group field-body">
                    <div class="field is-grouped">
                      <div class="field-label is-normal">
                        <label class="label">Language:</label>
                      </div>
                      <div class="field is-narrow">
                        <div class="control">
                          <div class="select ">
                            <select [id]="'lang' + i" formControlName="lang">
                              <option value=""> Choose a language</option>
                              <option *ngFor="let language of languageArray" [ngValue]="language.val">
                                {{language.show}}
                              </option>
                            </select>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-2">
                <button class="button is-small is-danger pull-right" (click)="removeLabelButtonClick(i)">
                  <span class="glyphicon glyphicon-remove"></span>
                </button>
              </div>
            </div>
          </div>
        </div>
        <button type="button" class="button is-warning is-inverted" (click)="addLabelButtonClick()"
          [disabled]="phenomenonForm.get('label').invalid">Add Label</button>
      </div>


      <!-- 1.2.3 DESCRIPTIONS -->
      <div class="container well some-space">
        <div class="field is-horizontal is-grouped">
          <div class="field-label is-normal">
            <label class="label">Description:</label>
          </div>
          <div class="form-group field-body">
            <div class="field">
              <div class="control">
                <textarea class="textarea is-normal" type="text" id="description" formControlName="description"
                  (blur)="logValidationErrors()"></textarea>
              </div>
              <span class="help-block" *ngIf="formErrors.description">
                {{formErrors.description}}
              </span>
            </div>
          </div>
        </div>
      </div>


      <!-- 1.2.4 DOMAINS -->
      <div class="container well some-space">
        <label for="domain">Domains</label>
        <div formArrayName="domain" *ngFor="let dom of phenomenonForm.get('domain').controls; let i = index">
          <div [formGroupName]="i">
            <div class="row">
              <div class="col-sm-10">
                <div class="field is-horizontal">
                  <div class="form-group field-body">
                    <div class="field is-grouped">
                      <div class="field-label is-narrow">
                        <label class="label">Domain:</label>
                      </div>
                      <div class="field is-narrow">
                        <div class="control">
                          <div class="select ">
                            <select [id]="'domainUri' + i" formControlName="domainUri">
                              <option> Choose a domain</option>
                              <option *ngFor="let domain of domainsArray" [ngValue]="domain.domain.value">
                                {{domain.label[0]?.value}}
                              </option>
                            </select>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-2">
                <button class="button is-small is-danger pull-right" (click)="removeDomainButtonClick(i)">
                  <span class="glyphicon glyphicon-remove"></span>
                </button>
              </div>
            </div>
          </div>
        </div>
        <button type="button" class="button is-warning is-inverted" (click)="addDomainButtonClick()"
          [disabled]="phenomenonForm.get('domain').invalid">Add Domain</button>
      </div>


      <!-- 1.2.5 UNITS -->
      <div class="container well some-space">
        <label for="unit">Units</label>
        <div formArrayName="unit" *ngFor="let dom of phenomenonForm.get('unit').controls; let i = index">
          <div [formGroupName]="i">
            <div class="row">
              <div class="col-sm-10">
                <div class="field is-horizontal">
                  <div class="form-group field-body">
                    <div class="field is-grouped">
                      <div class="field-label is-narrow">
                        <label class="label">unit:</label>
                      </div>
                      <div class="field is-narrow">
                        <div class="control">
                          <div class="select ">
                            <select [id]="'unitUri' + i" formControlName="unitUri">
                              <option> Choose a unit</option>
                              <option *ngFor="let unit of unitsArray" [ngValue]="unit.y.value">
                                {{unit.label.value}}
                              </option>
                            </select>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-2">
                <button class="button is-small is-danger pull-right" (click)="removeUnitButtonClick(i)">
                  <span class="glyphicon glyphicon-remove"></span>
                </button>
              </div>
            </div>
          </div>
        </div>
        <button type="button" class="button is-warning is-inverted" (click)="addUnitButtonClick()"
          [disabled]="phenomenonForm.get('unit').invalid">Add unit</button>
      </div>


    </div>


    <!-- 1.3 SUBMIT-BUTTONS -->
    <div class="panel-footer">
      <div class="field is-grouped">
        <p class="control">
          <button class="button is-success" type="submit" [disabled]="phenomenonForm.invalid">Save Changes</button>
        </p>
        <p class="control">
          <button class="button is-warning is-inverted" type="button" (click)="onLoadButtonClick()">Load data</button>
        </p>
      </div>
    </div>


  </div>


</form>